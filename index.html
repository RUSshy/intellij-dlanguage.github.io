<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="css/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>IntelliJ D Language</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>IntelliJ D Language</h1>
          <h2>Support for the D programming language within IntelliJ IDEA</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/intellij-dlanguage/intellij-dlanguage/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/intellij-dlanguage/intellij-dlanguage/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/intellij-dlanguage/intellij-dlanguage" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
            <a id="intellij-plugin-to-provide-support-for-the-d-programming-language" class="anchor" href="#intellij-plugin-to-provide-support-for-the-d-programming-language" aria-hidden="true"><span class="octicon octicon-link"></span></a>Intellij Plugin to provide support for the <a href="http://dlang.org/">D Programming Language</a>
          </h1>

          <p>
            <!-- <a href="slack://channel?team=intellij-dlanguage&id=general">Open in Slack</a> -->
            <a href="https://github.com/intellij-dlanguage/intellij-dlanguage/issues"><img src="https://img.shields.io/github/issues/intellij-dlanguage/intellij-dlanguage.svg"/></a>
            <a href="https://travis-ci.org/intellij-dlanguage/intellij-dlanguage"><img src="https://travis-ci.org/intellij-dlanguage/intellij-dlanguage.svg?branch=master" alt="Build Status - Master">
            <a href="https://travis-ci.org/intellij-dlanguage/intellij-dlanguage"><img src="https://travis-ci.org/intellij-dlanguage/intellij-dlanguage.svg?branch=develop" alt="Build Status - Develop"></a>
          </p>

          <p>This plugin brings D Language support to Intellij IDEA</p>

          <h2><a id="meetup-group" class="anchor" href="#meetup-group" aria-hidden="true"><span class="octicon octicon-link"></span></a>MeetUp Group</h2>

          <p>Come Along to the <a href="http://www.meetup.com/London-D-Programmers/">London D Meetup!</a></p>

          <p><a href="http://www.meetup.com/London-D-Programmers/"><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/london_d_programmers.png" alt="London D Meetup"></a></p>

          <h2><a id="advertising" class="anchor" href="#advertising" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advertising</h2>

          <p>I recently contributed as a technical reviewer for this great book about Learning D written by Michael Parker. Get it cheap by clicking on the images below:</p>

          <p><a href="http://bit.ly/1lSyjJ7"><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/learningd.jpg" alt="Learning D"></a></p>

          <p><a href="http://bit.ly/1lSyjJ7"><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/packt5.png" alt="Learning D"></a></p>

          <h2><a id="background" class="anchor" href="#background" aria-hidden="true"><span class="octicon octicon-link"></span></a>Background</h2>

          <p>I've just started learning the D programming language. I love the intellij IDE and wanted to have D support in my favourite IDE. This is the first
          Intellij plugin I've written and is still a work in progress to get the full support working.</p>

          <h2><a id="supported-jdk" class="anchor" href="#supported-jdk" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported JDK</h2>

          <p>This plugin has been written at the Java 1.7 language level. It will not work with a 1.6 JDK because
          it uses features of 1.7. If you are an OSX user like me - then if you usually run intellij with something less than 1.7 - you will need to Run intellij using 1.7 or 1.8 to use this plugin by doing the following:</p>

          <p>To force running under JDK 1.7 copy <code>/Applications/&lt;Product&gt;.app/Contents/bin/idea.properties</code> to <code>~/Library/Preferences/&lt;Product&gt;/</code> and
          change the JVMVersion key to 1.7*:</p>

          <pre><code>JVMVersion=1.7*</code></pre>

          <h2><a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

          <p><a href="https://www.jetbrains.com/idea/">Download</a> and install IntelliJ Community Edition (Free) or Ultimate (Paid)
          From IntelliJ go to Preferences &gt; Plugins &gt; Browse Repositories and search For "D Language" - you will see 2 plugins - Choose the <em>DLanguage</em> one and click install and then click restart intellij</p>

          <p>You can also download the plugin jar to your local disk here: <a href="https://plugins.jetbrains.com/plugin/8115?pr=">Jetbrains plugin repository</a> and then in intelliJ
          go to Preferences &gt; Plugins &gt; Install plugin from disk and choose the jar you downloaded</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/install.png" alt="installation"></p>

          <h2><a id="quick-usage" class="anchor" href="#quick-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Usage</h2>

          <h4><a id="open-existing-dub-project" class="anchor" href="#open-existing-dub-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Open existing DUB project</h4>

          <ul>
            <li>File -&gt; Open then choose your existing dub project folder</li>
            <li>After the project loads - right click on the module (first item in the project tree on left pane) and choose Module Settings (f4)</li>
            <li>In Module Setting - in the right pane in the Sources tab - locate the source directory in the tree and click it - and then click the blue sources folder at the top of the pane where it says Mark as</li>
            <li>That will mark the source folder as a Source folder in intellij - and it will go blue - now intellij know where to find the source code for your dub module and you can use the run configurations now</li>
          </ul>

          <h4><a id="new-project-with-dub" class="anchor" href="#new-project-with-dub" aria-hidden="true"><span class="octicon octicon-link"></span></a>New Project with DUB</h4>

          <ul>
            <li>When you select this to create a new project with dub - if dub is on your path it will attempt to use dub init to create a new dub project for you. If dub is not on your path it will create a source directory and you will have to create your sdl/json dub file manually or rename/delete the source folder and then use dub init to recreate it</li>
            <li>Or you can open an existing dub project by doing File -&gt; Open </li>
            <li>Once a dub project is loaded there is right click menu option to run with dub, or you can use the run config - run with Dub</li>
            <li>Before running go and configure the DTools in Preferences -&gt; Other Settings -&gt; D Tools</li>
          </ul>

          <h4><a id="configure-dtools" class="anchor" href="#configure-dtools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure DTools</h4>

          <p>The best option is to do and get the following tools and build them according to their github page instructions:</p>

          <ul>
            <li><a href="http://code.dlang.org/download">dub</a></li>
            <li><a href="https://github.com/Hackerpilot/DCD">DCD</a></li>
            <li><a href="https://github.com/Hackerpilot/Dscanner">DScanner</a></li>
            <li><a href="https://github.com/Hackerpilot/dfmt">Dfmt</a></li>
          </ul>

          <p>If you put these tools on your path you can go to Preferences -&gt; Other Settings -&gt; D Tools and just click autofind on each of the tools and it will find them. Otherwise you will need to select the correct path to the tool for each one.</p>

          <p>There is a nice blog post about setting up the tools at: <a href="http://www.samael.me.uk/2015/12/d-plugin-for-intellij-idea.html">www.samael.me.uk</a></p>

          <h4><a id="configuring-dcd" class="anchor" href="#configuring-dcd" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring DCD</h4>

          <p>To configure DCD in the dcd-server add a comma separated list of paths that point to your libraries that you want to include in autocompletion.</p>

          <p>For example:</p>

          <pre><code>/Library/D/dmd/src/phobos,/Library/D/dmd/src/druntime/import,/Users/hendriki/.dub/packages/rainbow-master/src</code></pre>

          <p>This will add the phobos and druntime/import as well as my rainbow dub project. You can add other dub packages by adding the path to them. I should be able to autoconfigure this stuff in a future release.</p>

          <h4><a id="dcd-server-restart-action" class="anchor" href="#dcd-server-restart-action" aria-hidden="true"><span class="octicon octicon-link"></span></a>DCD Server Restart Action</h4>

          <p>I noticed that after a while the auto completion seemed to cause the editor to hang. As a first step I have added a menu action in Tools as the last option to Restart the DCD Server. This action will just kill the running process and restart it again which seems to fix the hanging issue. I will investigate further to find a way to prevent the hanging in the first place but this is a helpful restart action.</p>

          <h4><a id="dformat" class="anchor" href="#dformat" aria-hidden="true"><span class="octicon octicon-link"></span></a>DFormat</h4>

          <p>To reformat D code use the shortcut or the menu item - Code -&gt; Reformat Code with D Format (ctrl+alt+K) or on mac (cmd+alt+K)</p>

          <h4><a id="dfix" class="anchor" href="#dfix" aria-hidden="true"><span class="octicon octicon-link"></span></a>DFix</h4>

          <p>To apply DFix to the a file use the shortcut or the menu item - Code -&gt; Fix D code with DFi (ctrl+alt+M) or on mac (cmd+alt+M)</p>

          <h4><a id="syntax-highlighting" class="anchor" href="#syntax-highlighting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax Highlighting</h4>

          <p>Go to Preferences -&gt; Editor -&gt; Colors and Fonts -&gt; D File</p>

          <p>You can customize the syntax highlighting colours here. Save as a new theme - and then untick the inherit from checkbox and this will allow you to choose a colour for each item.
          Only the native items will show as changing in the code example. From function definition downwards the options are related to annotated highlighting which is based on the grammar and not the lexer. So these don't show as chanigng the code example but they do wok.
          I created one similar to the sublime dark theme by using Darcula theme and customizing the colours here.</p>

          <h2><a id="progress" class="anchor" href="#progress" aria-hidden="true"><span class="octicon octicon-link"></span></a>Progress</h2>

          <p>Please see the development status on
          <a href="https://github.com/intellij-dlanguage/intellij-dlanguage#boards">DLanguage ZenBoard</a></p>

          <h4><a id="next-release---18" class="anchor" href="#next-release---18" aria-hidden="true"><span class="octicon octicon-link"></span></a>Next Release - 1.8</h4>

          <p>The next release should have the following:</p>

          <ul>
            <li><a href="https://github.com/intellij-dlanguage/intellij-dlanguage/issues/66">Issue 66 - Dub build configuration dub options bug</a></li>
            <li><a href="https://github.com/intellij-dlanguage/intellij-dlanguage/issues/65">Issue 65 - Bitwise Or token bug</a></li>
            <li><a href="https://github.com/intellij-dlanguage/intellij-dlanguage/issues/64">Issue 64 - DCD auto add source directories</a></li>
            <li><a href="https://github.com/intellij-dlanguage/intellij-dlanguage/issues/56">Issue 56 - DCD restart menu item bug</a></li>
          </ul>

          <h4><a id="latest-updates" class="anchor" href="#latest-updates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Latest Updates</h4>

          <ul>
            <li>9th January 2016 - Fixed some bugs and working towards getting more of the intellij features working</li>
            <li>27th December 2015 - Fixed DCD bugs and added dub init wizard to dub project creation</li>
            <li>25th December 2015 - Added code formatting with DFmt</li>
            <li>24th December 2015 - Added Syntax highlighting, DCD autocompletion, dub compile checking and Dscanner annotation</li>
            <li>23rd December 2015 - Released an early test version to the intellij plugin repository</li>
            <li>9th December 2015 - I have finished the first pass of the BNF grammar complete with extensive tests - the next step is to move onto basic syntax highlighting</li>
            <li>21st October 2015 - Work has begun to re-organize and track the upcoming work as well an initial work on the BNF grammar - I have switched master to previous_master and current master is a currently not working bnf shell project</li>
            <li>7th October 2015 - I have finally figured out several aspects of the BNF grammar and feel like I know enough now to begin a complete re-write of the parser using the grammarkit plugin for intellij. This will overcome the terrible performance issues caused by the integration of the DDT parser and will enable a longer term view of complete language support and lots of cool features that are just not possible to add in any other way.</li>
            <li>29th March 2015 - I've not managed to fix the performance issue. The problem is that the integration of the DDT parser/lexer with intellij has to jump through many hoops to work correctly as intellij don't make it easy to use external parsers directly. I think the only option is to go back to writing the BNF grammer and JFlex lexer - which I have started working on - however I think this will take a few months of effort. So I'm pushing back the alpha release to after the summer.</li>
            <li> 5th Feb 2015 - I've had some other demands on my time so had to push back the alpha release until end of March 2015. On the plus side I've discovered the major peformance issue that was holding me back - so I've started work on fixing it. Once I'm happy with the performance work will resume on more features.</li>
          </ul>

          <h2><a id="notes" class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes</h2>

          <p>I have seen a few other attempts at an intellij plugin for D. But none are complete yet. If another D plugin project advances
          further than this one - I will probably switch my efforts to that one and drop this one.</p>

          <p>In the immediate future I have decided to re-use the eclipse DDT D Lexer and Parser and integrate it with my intellij plugin. I have
          done some research into creating grammars and parsers and at the current point in time I have neither the time or the skills to
          write a lexer/parser or BNF Grammar for the D Language.</p>

          <p>When I find some time and as a learning opportunity I will try to write the BNF Grammar from scratch using the intellij Grammar-Kit
          and then I will also write the JFlex lexer by hand.
          (I've never written either a grammar or a lexer before so will probably get some help in this area and it probably will take a long time)</p>

          <p>I may also decide to re-write the eclipse DDT D lexer/parser within the intellij framework to better customize it for intellij - Again this
          may or may not happen in this amazing future where I actually have time for things like this.</p>

          <h2><a id="release" class="anchor" href="#release" aria-hidden="true"><span class="octicon octicon-link"></span></a>Release</h2>

          <p>The first official release will be published on the Jetbrains plugin site when I feel like the plugin offers the minimum viable functionality as
          contained in the Alpha Release milestone detailed above.</p>

          <h4><a id="release-schedule" class="anchor" href="#release-schedule" aria-hidden="true"><span class="octicon octicon-link"></span></a>Release Schedule</h4>

          <table>
          <thead>
          <tr>
          <th>Release</th>
          <th align="center">Date</th>
          <th align="right">Content Overview</th>
          </tr>
          </thead>
          <tbody>
          <tr>
          <td>Alpha</td>
          <td align="center">31 Jan 2016</td>
          <td align="right">Create D files, Dub, Syntax highlighting, Run Configs, Annotations, Indexes and References</td>
          </tr>
          <tr>
          <td>Beta</td>
          <td align="center">31 Jul 2016</td>
          <td align="right">Improved features plus quick fixes</td>
          </tr>
          <tr>
          <td>Gamma</td>
          <td align="center">31 Dec 2016</td>
          <td align="right">Debugger support</td>
          </tr>
          </tbody>
          </table>

          <h2><a id="screenshots" class="anchor" href="#screenshots" aria-hidden="true"><span class="octicon octicon-link"></span></a>Screenshots</h2>

          <p>Here are some screenshots of my progress so far:</p>

          <h2>
          <a id="recent-screenshots" class="anchor" href="#recent-screenshots" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recent Screenshots</h2>

          <p>Dtools configuration</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/tool_settings.png" alt="improved highlighting"></p>

          <p>Autocompletion using DCD</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/autocomplete.png" alt="improved highlighting"></p>

          <p>Compile checking</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/compile_checking.png" alt="improved highlighting"></p>

          <p>Dscanner Code Linting</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/dscanner_linting.png" alt="improved highlighting"></p>

          <p>Goto Class</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/goto_class.png" alt="improved highlighting"></p>

          <p>Configure Syntax Highlighting</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/highlighting_settings.png" alt="highlighting settings"></p>

          <h2>
          <a id="older-screenshots" class="anchor" href="#older-screenshots" aria-hidden="true"><span class="octicon octicon-link"></span></a>Older Screenshots</h2>

          <p>Improved Syntax Highlighting with Annotator:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/improved_syntax_highlighting.png" alt="improved highlighting"></p>

          <p>Syntax Highlighting and PSI Structure:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/highlighting_and_psi_structure.png" alt="highlighting and psi structure"></p>

          <p>Create a new D project:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/create_new_d_project.png" alt="create a new d project"></p>

          <p>Module Settings - add D compiler:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/module_settings_add_d_compiler.png" alt="module settings add d compiler"></p>

          <p>Module Settings - set D compiler in project:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/module_settings_set_project_d_compiler.png" alt="module settings add compiler to project"></p>

          <p>Add new D file (from right click menu)</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/right_click_add_new_d_file.png" alt="right click add new d file"></p>

          <p>D file editor:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/d_file_editor.png" alt="d file editor"></p>

          <p>Run Configuration menus:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/run_configuration_menus.png" alt="run configuration menus"></p>

          <p>Run Configuration create box:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/run_configuration_create_box.png" alt="run configuration create box"></p>

          <p>Run Configuration edit:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/run_configuration_edit.png" alt="run configuration edit"></p>

          <p>Run Configuration running:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/run_configuration_running.png" alt="run configuration running"></p>

          <p>PSI Tree and Highlighting:</p>

          <p><img src="https://github.com/intellij-dlanguage/intellij-dlanguage/raw/master/.README/psi_structure.png" alt="psi tree and highlighting"></p>

          <h2>          <a id="develop" class="anchor" href="#develop" aria-hidden="true"><span class="octicon octicon-link"></span></a>Develop</h2>

          <p>Interested in contributing to this D plugin please contact me at kingsley at masterthought dot net.
          Contributions are accepted via fork and pull request but please co-ordinate with me so we don't duplicate effort.</p>

          <h2>          <a id="instructions-for-developers" class="anchor" href="#instructions-for-developers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instructions for Developers</h2>

          <p>read this document: <a href="https://confluence.jetbrains.com/display/IDEADEV/Developing+Custom+Language+Plugins+for+IntelliJ+IDEA">developing custom language plugins for intellij</a></p>

          <p>also see this document for getting the environment setup: <a href="https://confluence.jetbrains.com/display/IDEADEV/PluginDevelopment">plugin development</a></p>

          <p>this one is also helpful: <a href="http://bjorn.tipling.com/how-to-make-an-intellij-idea-plugin-in-30-minutes">make a plugin in less than 30 mins</a></p>

          <h3>
          <a id="setup" class="anchor" href="#setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup</h3>

          <ol>
            <li>Download and install the community edition of intellij - <a href="https://www.jetbrains.com/idea/download/">here</a></li>
            <li>Download the intellij community edition source code - git clone --depth 1 <a href="https://github.com/JetBrains/intellij-community.git">https://github.com/JetBrains/intellij-community.git</a> (use depth 1 to reduce history otherwise it will take a long time)</li>
            <li>Open this plugin project in intellij</li>
            <li>In the module setting (F4) set the SDK to the path of the community edition JDK under the intellij platform plugin SDK</li>
            <li>Optionally add the community edition source to the source code paths in the module settings to allow access to the core code while debugging etc</li>
          </ol>
        </section>

        <footer>
          Dlanguage is maintained by <a href="https://github.com/intellij-dlanguage">intellij-dlanguage</a> team<br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>
        
      </div>
    </div>
  </body>
</html>
